<div class="contenedor-general">
  <div class="profile-header">
    <h1>Mi Perfil</h1>
    <p>Gestiona tu informaci√≥n personal y bancaria</p>
  </div>

  <% if current_user.bank_account %>
    <% editando = params[:edit] == "true" %>

    <form action="/actualizar_cuenta" method="post" class="profile-form">
      <input type="hidden" name="_method" value="put">
      
      <!-- Datos Bancarios -->
      <div class="contenedor-personales">
        <div class="section-header">
          <i class="icon-bank"></i>
          <h2>Datos Bancarios</h2>
        </div>
        
        <div class="form-group">
          <label for="cvu">CVU</label>
          <div class="input-wrapper">
            <input type="text" id="cvu" name="cvu" value="<%= current_user.bank_account.cvu %>" readonly>
          </div>
        </div>
        
        <div class="form-group">
          <label for="alias">Alias</label>
          <div class="input-wrapper">
            <input type="text" id="alias" name="alias" value="<%= current_user.bank_account.alias %>" 
                   <%= 'readonly' unless editando %> 
                   class="<%= 'editable' if editando %>">
          </div>
        </div>
      </div>

      <!-- Contacto -->
      <div class="contenedor-personales">
        <div class="section-header">
          <i class="icon-contact"></i>
          <h2>Contacto</h2>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" value="<%= current_user.email %>" 
                   <%= 'readonly' unless editando %> 
                   class="<%= 'editable' if editando %>">
          </div>
          
          <div class="form-group">
            <label for="phone">Tel√©fono</label>
            <input type="tel" id="phone" name="phone" value="<%= current_user.phone %>" 
                   <%= 'readonly' unless editando %> 
                   class="<%= 'editable' if editando %>">
          </div>
        </div>
      </div>

      <!-- Datos Personales -->
      <div class="contenedor-personales">
        <div class="section-header">
          <i class="icon-user"></i>
          <h2>Datos Personales</h2>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="name">Nombre</label>
            <input type="text" id="name" name="name" value="<%= current_user.name %>" 
                   <%= 'readonly' unless editando %> 
                   class="<%= 'editable' if editando %>">
          </div>
          
          <div class="form-group">
            <label for="last_name">Apellido</label>
            <input type="text" id="last_name" name="last_name" value="<%= current_user.last_name %>" 
                   <%= 'readonly' unless editando %> 
                   class="<%= 'editable' if editando %>">
          </div>
        </div>
        
        <div class="form-group">
          <label for="dni">DNI</label>
          <div class="input-wrapper">
            <input type="text" id="dni" name="dni" value="<%= current_user.dni %>" readonly>
          </div>
        </div>
      </div>

      <!-- Datos de Residencia -->
      <div class="contenedor-personales">
        <div class="section-header">
          <i class="icon-home"></i>
          <h2>Datos de Residencia</h2>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="locality">Localidad</label>
            <input type="text" id="locality" name="locality" value="<%= current_user.locality %>" 
                   <%= 'readonly' unless editando %> 
                   class="<%= 'editable' if editando %>">
          </div>
          
          <div class="form-group">
            <label for="cp">C√≥digo Postal</label>
            <input type="text" id="cp" name="cp" value="<%= current_user.cp %>" 
                   <%= 'readonly' unless editando %> 
                   class="<%= 'editable' if editando %>">
          </div>
        </div>
        
        <div class="form-group">
          <label for="address">Direcci√≥n</label>
          <input type="text" id="address" name="address" value="<%= current_user.address %>" 
                 <%= 'readonly' unless editando %> 
                 class="<%= 'editable' if editando %>">
        </div>
      </div>

      <!-- Botones de Acci√≥n -->
      <div class="form-actions">
        <% if editando %>
          <button class="btn btn-primary" type="submit">
            <span class="btn-icon">üíæ</span>
            Guardar Cambios
          </button>
          <a href="<%= request.path %>" class="btn btn-secondary">
            <span class="btn-icon">‚ùå</span>
            Cancelar
          </a>
        <% else %>
          <a href="?edit=true" class="btn btn-primary">
            <span class="btn-icon">‚úèÔ∏è</span>
            Editar Informaci√≥n
          </a>
        <% end %>
      </div>
    </form>

  <% else %>
        <h3>No se encontr√≥ una cuenta bancaria</h3>
  <% end %>
</div>
