       <% if !current_user.bank_account.card %>
       <div style = "justify-content: center;">
       <div id="no-card-state" class="no-card-state">
                <h2 class="section-title">No tienes tarjetas activas</h2>
                <p class="intro-text">Solicita tu primera tarjeta para comenzar a disfrutar de todos los beneficios</p>
                <form action="/generar_tarjeta" method="post">
            <button class="request-card-btn"type="submit">Solicitar Tarjeta</button>
            </form>
            </div>
        </div>
       <% else %>
            <div style="display: flex; flex-direction: column; align-items: center;">
                <%= partial "card", {
                card_type: "DÃ©bito",
                card_number: current_card.card_number,
                card_balance: current_user.bank_account.balance,
                card_exp_month: current_card.exp_month,
                card_exp_year: current_card.exp_year
                } %>

                <!-- Estado de la tarjeta -->
                <% if current_card.is_frozen %>
                <div style="background-color: #f8d7da; color: #842029; padding: 10px 15px; border-radius: 6px; border: 1px solid #f5c2c7; font-weight: bold; margin-top: 10px; width: 400px; text-align: center;">
                    ğŸ”’ Esta tarjeta estÃ¡ congelada
                </div>
                <% else %>
                <div style="background-color: #d1e7dd; color: #0f5132; padding: 10px 15px; border-radius: 6px; border: 1px solid #badbcc; font-weight: bold; margin-top: 10px; width: 400px; text-align: center;">
                    âœ… Esta tarjeta estÃ¡ activa
                </div>
                <% end %>

                <!-- BotÃ³n congelar/descongelar -->
                <form action="/cards/<%= current_card.id %>/<%= current_card.is_frozen ? "unfreeze" : "freeze" %>" method="post" style="margin-top: 10px; width: 400px; text-align: center;">
                <button class="freeze-btn" type="submit" style="background-color: #000000; color: white; padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer;">
                    <%= current_card.is_frozen ? "Descongelar Tarjeta" : "Congelar Tarjeta" %>
                </button>
                </form>

                <!-- Formulario de actualizaciÃ³n de lÃ­mite -->
                <form action="/cards/<%= current_card.id %>/set_limit" method="post" style="margin-top: 10px; width: 400px; text-align: center;">
                <p style="margin-bottom: 10px;">
                    <strong>Nuevo lÃ­mite:</strong>
                    <input
                    type="number"
                    id="limit"
                    name="limit"
                    step="0.01"
                    min="0.01"
                    required
                    value=""
                    style="width: 100%; padding: 8px 10px; border-radius: 6px; border: 1px solid #ccc; margin-top: 5px;"
                    >
                </p>
                <button type="submit" style="background-color: #000000; color: white; padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer;">
                    Guardar nuevo lÃ­mite
                </button>
                </form>
            </div>

            <% if session[:error] %>
            <div class="mensaje" style="color: red; font-weight: bold; margin-top: 5px;"><%= session[:error] %></div>
            <% elsif session[:success] %>
            <div class="mensaje" style="color: green; font-weight: bold; margin-top: 5px;"><%= session[:success] %></div>
            <% end %>
<% end %>
